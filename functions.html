<!DOCTYPE html>
<head>
  <title>Functions</title>
  <link rel="stylesheet" type="text/css" href="./styles/functions.css">
  <script src="./scripts/test.functions.js" defer></script>
  <script src="./scripts/functions.js" defer></script>
</head>
<body>
  <h1>Callbacks</h1>
  <div class="lesson-section">
    <p>
      Functions can be used in all sorts of different ways. We can think of
      uses that are conceptually similar as a "pattern".
    </p>
    <p>
      The first "pattern" we'll start with is what is known as a "callback" function.
      A "callback" is a function that is passed to another function as an argument.
    </p>
    <p>
      Consider the example below:
    </p>
    <pre>
      const callbackFunctionOne = () => {
        console.log('The first callback function is running.')
      }
      
      const callbackFunctionTwo = () => {
        console.log('The second callback function is running.')
      }
      
      const parentFunction = (cb) => {
        console.log('The parent function is running.')
      
        // Since 'cb' is just an agument, it can be anything.
        cb()
      }

      parentFunction(callbackFunctionOne)
      parentFunction(callbackFunctionTwo)
    </pre>
    <p>
      If you copy/paste that code into the browser console you'll see the messages logged.
      ("option + command + j")
    </p>
    <div class="code-exercise-section">
      <h4>Exercise: doArithmetic</h4>
      <p>
        Complete the function "doArithmetic" in functions.js. "doArithmetic" will accept
        a number as well as two "callback" functions. It will pass the number to the callback
        functions in order and return the result.
      </p>
      <p>
        For example:
      </p>
      <pre>
        var result = doArithmetic(6, divideByTwo, multiplyByThree)

        if (result === 9) {
          console.log('doArithmetic works as-expected')
        } else {
          console.log('doArithmetic is broken')
        }
      </pre>
      <p>
        In this example, "divideByTwo" and "multiplyByThree" would be callbacks specified elsewhere.
      </p>
      <div class="code-results" id="callback-exercise-results">
        Test Case:
        <pre class="code-results-test-case" id="callback-exercise-test-case"></pre>
        Results:
        <div class="code-results-output" id="callback-exercise-output"></div>
        <button id="callback-exercise-button">Test Code</button>
      </div>
    </div>
  </div>
  <h1>Functions that Return Functions</h1>
  <div class="lesson-section">
    <p>
      Some functions return other functions when called.
    </p>
    <pre>
      const parentFun = () => {
        console.log('The parent function is running.')

        const childFun = () => {
          console.log('The child function is running.')
        }

        return childFun
      }
      
      // The 'parent' will log once
      const test = parentFun()

      // The 'child' will log twice
      test()
      test()
    </pre>
    <p>
      By itself, this might not seem that useful. However, the advangage of doing this will become clear in the next lesson on "Closures".
    </p>
    <div class="code-exercise-section">
      <h4>Exercise: plusFive</h4>
      <p>
        Complete the function "plusFive" in functions.js. When called, "plusFive" 
        will return a function that adds five to any number passed as an argument.
      </p>
      <p>
        For example:
      </p>
      <pre>
        var addFive = plusFive()
        var result = addFive(10)

        // This should log 15
        console.log(result)
      </pre>
      <div class="code-results" id="funreturn-exercise-results">
        Test Case:
        <pre class="code-results-test-case" id="funreturn-exercise-test-case"></pre>
        Results:
        <div class="code-results-output" id="funreturn-exercise-output"></div>
        <button id="funreturn-exercise-button">Test Code</button>
      </div>
    </div>
  </div>
  <h1>Closures</h1>
  <div class="lesson-section">
    <p>
      This is where things get complicated. Put "simply", a "closure" is some sort of private, internal value a function can access.
    </p>
    <p>
      So what the hell does that mean? It's easier to understand looking at code. Consider this example:
    </p>
    <pre>
      const parentFun = () => {
        let count = 0

        const childFun = () => {
          count++
          console.log(`current count: ${count}`)
        }

        return childFun
      }
      
      // The 'parent' will return a new function every time it's called
      const test1 = parentFun()
      const test2 = parentFun()

      // count will be 2
      test1()
      test1()

      // count will be 1
      test2()
    </pre>
    <p>
      Outwardly, this example is very similar to the one use in "Functions that return Functions".
      There is one key difference however: notice the variable "count" created within "parentFun".
    </p>
    <p>
      This variable is created EVERY TIME "parentFun" is run, meaning every function returned by "parentFun"
      will retain its own, unique "count" variable. "count" is a closure.
    </p>
    <div class="code-exercise-section">
      <h4>Exercise: equationBuilder</h4>
      <p>
        Remember the "doArithmetic" exercise above? Yeah, we're doing to juice that up on closures.
      </p>
      <p>
        Complete the function "equationBuilder" in functions.js. "equationBuilder" accepts two "arithmetic" 
        functions as arguments and returns a function that will apply them on a number when called. For example:
      </p>
      <pre>
        var divideByFour = equationBuilder(divideByTwo, divideByTwo)
        var result = divideByFour(8)

        // This should log 2
        console.log(result)
      </pre>
      <div class="code-results" id="closure-exercise-results">
        Test Case:
        <pre class="code-results-test-case" id="closure-exercise-test-case"></pre>
        Results:
        <div class="code-results-output" id="closure-exercise-output"></div>
        <button id="closure-exercise-button">Test Code</button>
      </div>
    </div>
  </div>
</body>